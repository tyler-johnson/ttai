import{c as te,l as ee,a as S,b as C,f as E}from"../chunks/DqUxWMRJ.js";import{aF as ae,aG as re,aH as ne,h as W,U as se,aI as oe,aJ as ie,aK as ce,aL as le,aM as de,aN as Lt,e as B,aO as ue,C as Pt,R as fe,aP as ve,an as _e,aQ as be,n as he,P as N,aR as pe,M as X,aS as h,o as $,N as q,q as ge,t as d,O as f,aT as x,I as s,F as T,aU as O,aV as G,aW as me,u,a7 as Z}from"../chunks/BUkj7gk9.js";import{d as ye,e as xe,s as V}from"../chunks/CVW21_L_.js";import{i as F}from"../chunks/KZEFVD2o.js";var we="font-weight: bold",Te="font-weight: normal";function Mt(t){console.warn(`%c[svelte] state_snapshot_uncloneable
%c${t?`The following properties cannot be cloned with \`$state.snapshot\` — the return value contains the originals:

${t}`:"Value cannot be cloned with `$state.snapshot` — the original value was returned"}
https://svelte.dev/e/state_snapshot_uncloneable`,we,Te)}const ke=[];function Se(t,e=!1,r=!1){if(!e){const a=[],n=K(t,new Map,"",a,null,r);if(a.length===1&&a[0]==="")Mt();else if(a.length>0){const o=a.length>10?a.slice(0,7):a.slice(0,10),l=a.length-o.length;let i=o.map(_=>`- <value>${_}`).join(`
`);l>0&&(i+=`
- ...and ${l} more`),Mt(i)}return n}return K(t,new Map,"",ke,null,r)}function K(t,e,r,a,n=null,o=!1){if(typeof t=="object"&&t!==null){var l=e.get(t);if(l!==void 0)return l;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(ae(t)){var i=Array(t.length);e.set(t,i),n!==null&&e.set(n,i);for(var _=0;_<t.length;_+=1){var m=t[_];_ in t&&(i[_]=K(m,e,`${r}[${_}]`,a,null,o))}return i}if(re(t)===ne){i={},e.set(t,i),n!==null&&e.set(n,i);for(var A in t)i[A]=K(t[A],e,`${r}.${A}`,a,null,o);return i}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function"&&!o)return K(t.toJSON(),e,`${r}.toJSON()`,a,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return a.push(r),t}}const It=[...` 	
\r\f \v\uFEFF`];function Ce(t,e,r){var a=t==null?"":""+t;if(r){for(var n in r)if(r[n])a=a?a+" "+n:n;else if(a.length)for(var o=n.length,l=0;(l=a.indexOf(n,l))>=0;){var i=l+o;(l===0||It.includes(a[l-1]))&&(i===a.length||It.includes(a[i]))?a=(l===0?"":a.substring(0,l))+a.substring(i+1):l=i}}return a===""?null:a}function D(t,e,r,a,n,o){var l=t.__className;if(W||l!==r||l===void 0){var i=Ce(r,a,o);(!W||i!==t.getAttribute("class"))&&(i==null?t.removeAttribute("class"):t.className=i),t.__className=r}else if(o&&n!==o)for(var _ in o){var m=!!o[_];(n==null||m!==!!n[_])&&t.classList.toggle(_,m)}return o}const Ee=Symbol("is custom element"),Ae=Symbol("is html");function tt(t){if(W){var e=!1,r=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var a=t.value;$t(t,"value",null),t.value=a}if(t.hasAttribute("checked")){var n=t.checked;$t(t,"checked",null),t.checked=n}}};t.__on_r=r,se(r),oe()}}function Nt(t,e){var r=jt(t);r.checked!==(r.checked=e??void 0)&&(t.checked=e)}function $t(t,e,r,a){var n=jt(t);if(W&&(n[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")){Le(t,e,"");return}n[e]!==(n[e]=r)&&(e==="loading"&&(t[ie]=r),t.removeAttribute(e))}function jt(t){return t.__attributes??(t.__attributes={[Ee]:t.nodeName.includes("-"),[Ae]:t.namespaceURI===ce})}function Le(t,e,r){e==="srcset"&&Me(t,r)||_t(t.getAttribute(e)??"",r)||le(e,t.outerHTML.replace(t.innerHTML,t.innerHTML&&"..."),String(r))}function _t(t,e){return t===e?!0:new URL(t,document.baseURI).href===new URL(e,document.baseURI).href}function Ot(t){return t.split(",").map(e=>e.trim().split(" ").filter(Boolean))}function Me(t,e){var r=Ot(t.srcset),a=Ot(e);return a.length===r.length&&a.every(([n,o],l)=>o===r[l][1]&&(_t(r[l][0],n)||_t(n,r[l][0])))}function Ft(t,e,r=e){var a=new WeakSet;de(t,"input",async n=>{t.type==="checkbox"&&Lt();var o=n?t.defaultValue:t.value;if(o=ft(t)?vt(o):o,r(o),B!==null&&a.add(B),await ue(),o!==(o=e())){var l=t.selectionStart,i=t.selectionEnd,_=t.value.length;if(t.value=o??"",i!==null){var m=t.value.length;l===i&&i===_&&m>_?(t.selectionStart=m,t.selectionEnd=m):(t.selectionStart=l,t.selectionEnd=Math.min(i,m))}}}),(W&&t.defaultValue!==t.value||Pt(e)==null&&t.value)&&(r(ft(t)?vt(t.value):t.value),B!==null&&a.add(B)),fe(()=>{t.type==="checkbox"&&Lt();var n=e();if(t===document.activeElement){var o=ve??B;if(a.has(o))return}ft(t)&&n===vt(t.value)||t.type==="date"&&!n&&!t.value||n!==t.value&&(t.value=n??"")})}function ft(t){var e=t.type;return e==="number"||e==="range"}function vt(t){return t===""?null:+t}function et(t,...e){return Pt(()=>{try{let r=!1;const a=[];for(const n of e)n&&typeof n=="object"&&_e in n?(a.push(Se(n,!0)),r=!0):a.push(n);r&&(be(t),console.log("%c[snapshot]","color: grey",...a))}catch{}}),e}async function Ie(){const t=await fetch("/api/server-info");if(!t.ok)throw new Error("Failed to load server info");return t.json()}async function Ne(){const t=await fetch("/api/settings");if(!t.ok)throw new Error("Failed to load settings");return t.json()}async function $e(t){const e=await fetch("/api/settings",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error("Failed to save settings");return e.json()}async function Oe(){const t=await fetch("/api/tastytrade");if(!t.ok)throw new Error("Failed to load TastyTrade status");return t.json()}async function Fe(t,e){return(await fetch("/api/tastytrade",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_secret:t,refresh_token:e})})).json()}async function Pe(){const t=await fetch("/api/tastytrade",{method:"DELETE"});if(!t.ok)throw new Error("Failed to logout");return t.json()}async function je(t){await navigator.clipboard.writeText(t)}v[T]="src/routes/+page.svelte";var Ue=C(E('<div class="flex items-center gap-3"><code class="flex-1 bg-base-300 px-3 py-2 rounded text-sm font-mono truncate"> </code> <button> </button></div>'),v[T],[[149,7,[[150,8],[153,8]]]]),Re=C(E('<div class="space-y-3"><!> <div class="flex items-center gap-3"><code class="flex-1 bg-base-300 px-3 py-2 rounded text-sm font-mono truncate"> </code> <button> </button></div></div> <p class="text-sm text-neutral-content mt-2">Add this URL to your MCP client configuration</p>',1),v[T],[[147,5,[[162,6,[[163,7],[166,7]]]]],[175,5]]),He=C(E('<button class="btn btn-secondary btn-sm">Disconnect</button>'),v[T],[[191,6]]),Je=C(E('<button class="btn btn-primary btn-sm">Connect...</button>'),v[T],[[193,6]]),qe=C(E('<div class="card bg-base-200 mb-4"><div class="card-body"><h2 class="card-title text-sm font-semibold text-neutral-content uppercase tracking-wide">MCP Server</h2> <!></div></div> <div class="card bg-base-200"><div class="card-body"><h2 class="card-title text-sm font-semibold text-neutral-content uppercase tracking-wide">TastyTrade</h2> <div class="flex items-center gap-3"><div></div> <span class="flex-1"> </span> <!></div></div></div>',1),v[T],[[141,2,[[142,3,[[143,4]]]]],[182,2,[[183,3,[[184,4],[187,4,[[188,5],[189,5]]]]]]]]),Ve=C(E('<div class="form-control"><label class="label cursor-pointer justify-start gap-3"><input type="checkbox" class="checkbox checkbox-primary"/> <span class="label-text">Launch TTAI when you log in</span></label></div> <div class="divider my-2"></div> <div class="form-control"><label class="label cursor-pointer justify-start gap-3"><input type="checkbox" class="checkbox checkbox-primary"/> <span class="label-text">Open settings in browser on launch</span></label></div>',1),v[T],[[208,5,[[209,6,[[210,7],[216,7]]]]],[219,5],[220,5,[[221,6,[[222,7],[228,7]]]]]]),De=C(E('<div class="card bg-base-200"><div class="card-body"><h2 class="card-title text-sm font-semibold text-neutral-content uppercase tracking-wide">Startup</h2> <!></div></div>'),v[T],[[202,2,[[203,3,[[204,4]]]]]]),Be=C(E('<div class="card bg-base-200"><div class="card-body text-center"><img src="/favicon.png" alt="TTAI Logo" class="mx-auto w-24 h-24 rounded-2xl mb-4"/> <h1 class="text-3xl font-bold">TTAI</h1> <p class="text-neutral-content">TastyTrade AI Assistant</p> <p class="text-sm text-neutral-content mb-4"> </p> <div class="divider my-2"></div> <p class="text-sm text-neutral-content leading-relaxed">AI-powered trading analysis using the TastyTrade API.<br/> Connect via MCP for intelligent insights.</p></div></div>'),v[T],[[238,2,[[239,3,[[240,4],[241,4],[242,4],[243,4],[246,4],[247,4,[[248,58]]]]]]]]),Ge=C(E('<p class="text-error text-sm mb-4"> </p>'),v[T],[[294,4]]),Ke=C(E('<div class="modal modal-open"><div class="modal-box bg-base-200"><h3 class="text-lg font-semibold mb-1">Connect to TastyTrade</h3> <p class="text-sm text-neutral-content mb-5">Enter your TastyTrade API credentials</p> <div class="form-control mb-4"><label class="label" for="client-secret"><span class="label-text text-neutral-content text-sm">Client Secret</span></label> <input id="client-secret" type="password" class="input input-bordered w-full" placeholder="Enter client secret"/></div> <div class="form-control mb-4"><label class="label" for="refresh-token"><span class="label-text text-neutral-content text-sm">Refresh Token</span></label> <input id="refresh-token" type="password" class="input input-bordered w-full" placeholder="Enter refresh token"/></div> <!> <a href="https://my.tastytrade.com/app.html#/manage/api-access" target="_blank" class="link link-primary text-sm">Get Credentials...</a> <div class="modal-action"><button class="btn btn-secondary">Cancel</button> <button class="btn btn-primary">Connect</button></div></div></div>'),v[T],[[259,1,[[263,2,[[264,3],[265,3],[267,3,[[268,4,[[269,5]]],[271,4]]],[280,3,[[281,4,[[282,5]]],[284,4]]],[297,3],[305,3,[[306,4],[307,4]]]]]]]]),We=C(E('<div class="container mx-auto max-w-xl p-5"><div role="tablist" class="tabs tabs-bordered mb-6"><button role="tab">Connection</button> <button role="tab">Settings</button> <button role="tab">About</button></div> <!> <!> <!></div> <!>',1),v[T],[[110,0,[[112,1,[[113,2],[121,2],[129,2]]]]]]);function v(t,e){te(new.target),he(e,!0,v);let r=N(O("connection"),"activeTab"),a=N(O(null),"serverInfo"),n=N(O(null),"settings"),o=N(O(!1),"isAuthenticated"),l=N(O(!1),"showLoginModal"),i=N(O(""),"loginError"),_=N(O(""),"clientSecret"),m=N(O(""),"refreshToken"),A=N(O(null),"copiedUrl");pe(async()=>{try{const[c,b,p]=(await G(Promise.all([Ie(),Ne(),Oe()])))();h(a,c,!0),h(n,b,!0),h(o,p.authenticated,!0)}catch(c){console.error(...et("error","Failed to load initial data:",c))}});async function at(c){try{(await G(je(c)))(),h(A,c,!0),setTimeout(()=>h(A,null),1500)}catch(b){console.error(...et("error","Failed to copy:",b))}}async function bt(c,b){try{h(n,(await G($e({[c]:b})))(),!0)}catch(p){console.error(...et("error","Failed to save settings:",p))}}function Ut(){h(_,""),h(m,""),h(i,""),h(l,!0)}function Y(){h(l,!1)}async function ht(){if(!s(_).trim()||!s(m).trim()){h(i,"Please enter both client secret and refresh token");return}try{const c=(await G(Fe(s(_).trim(),s(m).trim())))();c.authenticated?(h(o,!0),Y()):h(i,c.error||"Login failed",!0)}catch{h(i,"Connection error")}}async function Rt(){try{(await G(Pe()))(),h(o,!1)}catch(c){console.error(...et("error","Failed to disconnect:",c))}}function Ht(c){x(c.key,"Escape")&&s(l)&&Y(),x(c.key,"Enter")&&s(l)&&ht()}var Jt={...ee()},pt=We();xe("keydown",me,Ht);var rt=X(pt),nt=d(rt),st=d(nt);let gt;st.__click=()=>h(r,"connection");var ot=f(st,2);let mt;ot.__click=()=>h(r,"settings");var yt=f(ot,2);let xt;yt.__click=()=>h(r,"about"),u(nt);var wt=f(nt,2);{var qt=c=>{var b=qe(),p=X(b),k=d(p),P=f(d(k),2);{var w=L=>{var H=Re(),kt=X(H),St=d(kt);{var Yt=lt=>{var dt=Ue(),ut=d(dt),Xt=d(ut,!0);u(ut);var z=f(ut,2);let At;z.__click=()=>at(s(a).https_url);var Zt=d(z,!0);u(z),u(dt),q(()=>{V(Xt,s(a).https_url),At=D(z,1,"btn btn-sm",null,At,{"btn-success":x(s(A),s(a).https_url)}),V(Zt,x(s(A),s(a).https_url)?"Copied!":"Copy")}),S(lt,dt)};$(()=>F(St,lt=>{s(a).https_url&&lt(Yt)}),"if",v,148,6)}var Ct=f(St,2),ct=d(Ct),Qt=d(ct,!0);u(ct);var Q=f(ct,2);let Et;Q.__click=()=>at(s(a).http_url);var zt=d(Q,!0);u(Q),u(Ct),u(kt),Z(2),q(()=>{V(Qt,s(a).http_url),Et=D(Q,1,"btn btn-sm",null,Et,{"btn-success":x(s(A),s(a).http_url)}),V(zt,x(s(A),s(a).http_url)?"Copied!":"Copy")}),S(L,H)};$(()=>F(P,L=>{s(a)&&L(w)}),"if",v,146,4)}u(k),u(p);var j=f(p,2),M=d(j),J=f(d(M),2),I=d(J);let U;var R=f(I,2),g=d(R,!0);u(R);var y=f(R,2);{var it=L=>{var H=He();H.__click=Rt,S(L,H)},Wt=L=>{var H=Je();H.__click=Ut,S(L,H)};$(()=>F(y,L=>{s(o)?L(it):L(Wt,!1)}),"if",v,190,5)}u(J),u(M),u(j),q(()=>{U=D(I,1,"w-3 h-3 rounded-full",null,U,{"bg-success":s(o),"bg-error":!s(o)}),V(g,s(o)?"Connected":"Not Connected")}),S(c,b)};$(()=>F(wt,c=>{x(s(r),"connection")&&c(qt)}),"if",v,140,1)}var Tt=f(wt,2);{var Vt=c=>{var b=De(),p=d(b),k=f(d(p),2);{var P=w=>{var j=Ve(),M=X(j),J=d(M),I=d(J);tt(I),I.__change=y=>bt("launch_at_startup",y.currentTarget.checked),Z(2),u(J),u(M);var U=f(M,4),R=d(U),g=d(R);tt(g),g.__change=y=>bt("open_settings_on_launch",y.currentTarget.checked),Z(2),u(R),u(U),q(()=>{Nt(I,s(n).launch_at_startup),Nt(g,s(n).open_settings_on_launch)}),S(w,j)};$(()=>F(k,w=>{s(n)&&w(P)}),"if",v,207,4)}u(p),u(b),S(c,b)};$(()=>F(Tt,c=>{x(s(r),"settings")&&c(Vt)}),"if",v,201,1)}var Dt=f(Tt,2);{var Bt=c=>{var b=Be(),p=d(b),k=f(d(p),6),P=d(k);u(k),Z(4),u(p),u(b),q(()=>{var w;return V(P,`Version ${((w=s(a))==null?void 0:w.version)??"1.0.0"??""}`)}),S(c,b)};$(()=>F(Dt,c=>{x(s(r),"about")&&c(Bt)}),"if",v,237,1)}u(rt);var Gt=f(rt,2);{var Kt=c=>{var b=Ke();b.__click=g=>x(g.target,g.currentTarget)&&Y();var p=d(b),k=f(d(p),4),P=f(d(k),2);tt(P),u(k);var w=f(k,2),j=f(d(w),2);tt(j),u(w);var M=f(w,2);{var J=g=>{var y=Ge(),it=d(y,!0);u(y),q(()=>V(it,s(i))),S(g,y)};$(()=>F(M,g=>{s(i)&&g(J)}),"if",v,293,3)}var I=f(M,4),U=d(I);U.__click=Y;var R=f(U,2);R.__click=ht,u(I),u(p),u(b),Ft(P,function(){return s(_)},function(y){h(_,y)}),Ft(j,function(){return s(m)},function(y){h(m,y)}),S(c,b)};$(()=>F(Gt,c=>{s(l)&&c(Kt)}),"if",v,257,0)}return q(()=>{gt=D(st,1,"tab",null,gt,{"tab-active":x(s(r),"connection")}),mt=D(ot,1,"tab",null,mt,{"tab-active":x(s(r),"settings")}),xt=D(yt,1,"tab",null,xt,{"tab-active":x(s(r),"about")})}),S(t,pt),ge(Jt)}ye(["click","change"]);export{v as component};
